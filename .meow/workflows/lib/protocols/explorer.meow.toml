# Explorer Protocol - Explore and document codebase
#
# Use this for:
# - Learning a new codebase
# - Creating documentation
# - Architecture mapping
# - Dependency analysis
#
# This is the simplest protocol - just explore and summarize.

[main]
name = "explorer-protocol"
description = "Codebase exploration and documentation"

[main.variables]
agent = { required = true, description = "Agent ID" }
track_name = { required = true, description = "Track name for logging" }
task = { required = true, description = "Task object with exploration target" }

# Step 1: Explore
[[main.steps]]
id = "explore"
executor = "agent"
agent = "{{agent}}"
prompt = """
# Explore: {{track_name}}

## Your Assignment

{{task.task_system}}: {{task.task_ids}}

## Exploration Guide

1. **Start with entry points**
   - Main files, entry points, CLI commands
   - Configuration files
   - README and documentation

2. **Follow the code flow**
   - How does data move through the system?
   - What are the key abstractions?
   - How do components communicate?

3. **Map the architecture**
   - Directory structure and organization
   - Key packages/modules and their purposes
   - External dependencies

4. **Note interesting patterns**
   - Design patterns used
   - Conventions followed
   - Unusual or clever techniques

Take detailed notes as you explore.

When exploration is complete: `meow done`
"""

# Step 2: Document findings
[[main.steps]]
id = "document"
executor = "agent"
agent = "{{agent}}"
needs = ["explore"]
prompt = """
# Document Findings

Create documentation based on your exploration:

## Create or Update Documentation

Write a comprehensive overview:

```markdown
# {{track_name}} - Architecture Overview

## Purpose
[What does this code do?]

## Structure
[Directory layout and organization]

## Key Components
[Main modules and their responsibilities]

## Data Flow
[How data moves through the system]

## Dependencies
[External dependencies and why they're used]

## Patterns
[Design patterns and conventions]

## Notes
[Anything else notable]
```

Save to an appropriate location (e.g., `docs/{{track_name}}-overview.md`).

Commit your documentation:
`git commit -m "docs: add {{track_name}} architecture overview"`

When documentation is complete: `meow done`
"""
